<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7 e Meio</title>
</head>

<body>

    <div id="div_geral">
        <div id="div_começar">
            <button onclick="jogar()">começar</button>           
        </div>
    </div>
    <div id="div_resultados"></div>

</body>

</html>
<script>

    listaCartas = ["Ás", "2", "3", "4", "5", "6", "7", "Valete", "Rainha", "Rei"];
    listaNipes = ["copas", "espadas", "paus", "ouros"]

    
    var pontosJ = 0
    var pontosCPU = 0
    var soma = 0
    var msg = ""  

    listaCartas_foi = []
    listaNipe_foi = []

    function jogar() {
        div_geral.innerHTML =`            <button onclick="sortear()">Pedir Outra Carta</button>
        <button onclick="Passar()">Passar Vez</button> `

        div_resultados.innerHTML = ""
    msg = "Jogador : <br>" 
    pontosJ = 0
     pontosCPU = 0
     soma = 0
 
    
    listaCartas_foi = []
    listaNipe_foi = []
    sortear()
    }
    function sortear() {
        var nome_nipe = ""
        var nome_carta = ""

        var Nipe = parseInt(Math.random() * 4)
        var Carta = parseInt(Math.random() * 10)


        console.log(listaNipes[Nipe], listaCartas[Carta])

        if(listaCartas_foi.includes(listaCartas[Carta])){
            for (var i = 0; i < listaNipes.lenght; i++) {
                if (
                    listaCartas[Carta] == listaCartas_foi[i] && listaNipes[i] == listaNipes[Nipe]
                ) {
                    Carta = parseInt(Math.random() * 10)
                    Nipe = parseInt(Math.random() * 4)
                }
            }
          
            listaCartas_foi.push(listaCartas[Carta])
            listaNipe_foi.push(listaNipes[Nipe])
        }
        else{
            listaCartas_foi.push(listaCartas[Carta])
            listaNipe_foi.push(listaNipes[Nipe])
        }

        if (Carta == 0){
            soma = 1
        }
        else if (Carta == 1){
            soma = 2
        }
        else if (Carta == 2){
            soma = 3
        }
        else if (Carta == 3){
            soma = 4
        }
        else if (Carta == 4){
            soma = 5
        }
        else if (Carta == 5){
            soma = 6
        }
        else if (Carta == 6){
            soma = 7
        }
        else if (Carta == 7 || Carta == 8 || Carta == 9){
            soma = 0.5
        }
         pontosJ = pontosJ + soma

         msg += `(${pontosJ} pontos)-${listaCartas[Carta]} de ${listaNipes[Nipe]}<br>`

         
         if(pontosJ == 7.5){
            msg += 'SETE E MEIO! O jogador venceu com 7.5 pontos!'
            div_geral.innerHTML = `<button onclick="jogar()">Jogar dnv</button>`

        }
        else if(pontosJ >7.5){
            msg +=`O JOGADOR ESTOUROU! A banca venceu com ${pontosCPU} pontos`
            div_geral.innerHTML = `<button onclick="jogar()">Jogar dnv</button>`

        }

        div_resultados.innerHTML =`${msg}`
        console.log(listaCartas_foi)
        console.log(listaNipe_foi)
    }
    function Passar(){
        
        msg += ` <br>CPU:<br>`
        for(var i =0; pontosCPU < pontosJ; i++ )
{                var nome_nipe = ""
        var nome_carta = ""

        var Nipe = parseInt(Math.random() * 4)
        var Carta = parseInt(Math.random() * 10)


        console.log(listaNipes[Nipe], listaCartas[Carta])

        if(listaCartas_foi.includes(listaCartas[Carta])){
            for (var i = 0; i < listaNipes.lenght; i++) {
                if (
                    listaCartas[Carta] == listaCartas_foi[i] && listaNipes[i] == listaNipes[Nipe]
                ) {
                    Carta = parseInt(Math.random() * 10)
                    Nipe = parseInt(Math.random() * 4)
                }
            }
          
            listaCartas_foi.push(listaCartas[Carta])
            listaNipe_foi.push(listaNipes[Nipe])
        }
        else{
            listaCartas_foi.push(listaCartas[Carta])
            listaNipe_foi.push(listaNipes[Nipe])
        }

        if (Carta == 0){
            soma = 1
        }
        else if (Carta == 1){
            soma = 2
        }
        else if (Carta == 2){
            soma = 3
        }
        else if (Carta == 3){
            soma = 4
        }
        else if (Carta == 4){
            soma = 5
        }
        else if (Carta == 5){
            soma = 6
        }
        else if (Carta == 6){
            soma = 7
        }
        else if (Carta == 7 || Carta == 8 || Carta == 9){
            soma = 0.5
        }
         pontosCPU = pontosCPU + soma

         msg += `(${pontosCPU} pontos)-${listaCartas[Carta]} de ${listaNipes[Nipe]}<br>`

        if(pontosCPU>pontosJ && pontosCPU <7.5){
                        msg += `A banca venceu com ${pontosCPU} pontos!`
            div_geral.innerHTML = `<button onclick="jogar()">Jogar dnv</button>`
        }
         else if(pontosCPU == 7.5){
            msg += 'SETE E MEIO! A banca venceu com 7.5 pontos!'
            div_geral.innerHTML = `<button onclick="jogar()">Jogar dnv</button>`

        }
        else if(pontosCPU >7.5){
            msg +=`A BANCA ESTOUROU! O jogador venceu com ${pontosCPU} pontos`
            div_geral.innerHTML = `<button onclick="jogar()">Jogar dnv</button>`
        }
            
            div_resultados.innerHTML =`${msg}`
            console.log(listaCartas_foi)
        console.log(listaNipe_foi)
    }
}

</script>